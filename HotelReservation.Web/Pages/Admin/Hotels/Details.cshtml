@page
@model HotelReservation.Web.Pages.Admin.Hotels.DetailsModel

@{
    ViewData["Title"] = "Admin - Otel Detayı";
}

<a asp-page="./Index" class="btn btn-link">&larr; Otel listesine dön</a>

@if (!string.IsNullOrEmpty(Model.Message))
{
    <div class="alert alert-success">@Model.Message</div>
}
@if (!string.IsNullOrEmpty(Model.ErrorMessage))
{
    <div class="alert alert-danger">@Model.ErrorMessage</div>
}

@if (Model.Hotel == null)
{
    <div class="alert alert-danger">Otel bulunamadı.</div>
}
else
{
    <div class="row">
        <div class="col-md-6">
            <div class="card shadow-sm mb-3">
                <div class="card-body">
                    <h3 class="card-title">@Model.Hotel.Name</h3>
                    <h6 class="card-subtitle mb-2 text-muted">@Model.Hotel.City</h6>
                    <p><strong>Adres:</strong> @Model.Hotel.Address</p>
                    <p><strong>Açıklama:</strong> @Model.Hotel.Description</p>
                    <p>
                        <strong>Onay Durumu:</strong>
                        @(Model.Hotel.IsApproved ? "Onaylı" : "Onaysız")
                    </p>
                    <p>
                        <strong>Aktif:</strong>
                        @(Model.Hotel.IsActive ? "Evet" : "Hayır")
                    </p>

                    <form method="post" asp-page-handler="Approve" asp-route-id="@Model.Hotel.Id">
                        <button type="submit" class="btn btn-success"
                                @(Model.Hotel.IsApproved ? "disabled" : null)>
                            Oteli Onayla
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <h4>İstatistikler</h4>

            @if (Model.Stats == null)
            {
                <div class="alert alert-info">
                    Bu otel için istatistik bilgisi bulunamadı.
                </div>
            }
            else
            {
                <table class="table table-bordered w-auto">
                    <tr>
                        <th>Oda Sayısı</th>
                        <td>@Model.Stats.RoomCount</td>
                    </tr>
                    <tr>
                        <th>Rezervasyon Sayısı</th>
                        <td>@Model.Stats.ReservationCount</td>
                    </tr>
                    <tr>
                        <th>Toplam Gelir</th>
                        <td>@Model.Stats.TotalRevenue.ToString("C")</td>
                    </tr>
                    <tr>
                        <th>Ortalama Puan</th>
                        <td>
                            @if (Model.Stats.AverageRating.HasValue && Model.Stats.AverageRating.Value > 0)
                            {
                                @Model.Stats.AverageRating.Value.ToString("0.0") @: / 5
                            }
                            else
                            {
                                <span>Henüz yorum yok</span>
                            }
                        </td>
                    </tr>
                </table>
            }
        </div>
    </div>
}
